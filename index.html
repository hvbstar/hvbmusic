<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- SEO Meta Tags -->
<title>HVB x Chjllx</title>
<meta name="description" content="Welcome to my website, all my information is in this link!" />
<meta name="keywords" content="Hoang Van Bao, HVB, Artist, Singer, Musician, HVB Music" />
<meta name="author" content="Hoang Van Bao" />
<meta name="robots" content="index, follow" />
<link rel="canonical" href="https://hvbstar.github.io/hvbmusic/" />
<meta name="theme-color" content="#000000" />

<!-- Open Graph (Facebook, Zalo) -->
<meta property="og:locale" content="vi_VN" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://hvbstar.github.io/hvbmusic/" />
<meta property="og:title" content="Ho√†ng VƒÉn B·∫£o" />
<meta property="og:description" content="Welcome to my website, all my information is in this link!" />
<meta property="og:image" content="https://hvbstar.github.io/hvbmusic/img/hvbdz-1200x630.png" />
<meta property="og:image:alt" content="Thumbnail - Hoang Van Bao HVB Website" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:site_name" content="Artist Ho√†ng VƒÉn B·∫£o" />
<meta property="og:updated_time" content="2025-08-31T00:00:00+07:00" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Ho√†ng VƒÉn B·∫£o" />
<meta name="twitter:description" content="Welcome to my website, all my information is in this link!" />
<meta name="twitter:image" content="https://hvbstar.github.io/hvbmusic/img/hvbdz-1200x630.png" />
<meta name="twitter:site" content="@hvbfaq" />

<!-- Favicon & Icons -->
<link rel="icon" type="image/jpg" sizes="32x32" href="./img/hvbwibu-32x32.jpg" />
<link rel="icon" type="image/jpg" sizes="512x512" href="./img/hvbwibu-512x512.jpg" />
<link rel="apple-touch-icon" sizes="180x180" href="./img/hvbwibu-180x180.jpg" />
<link rel="manifest" href="site.webmanifest" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />

<!-- JSON-LD Structured Data (SEO Google) -->
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "Person",
"name": "Hoang Van Bao",
"url": "https://hvbstar.github.io/hvbmusic/",
"image": "https://hvbstar.github.io/hvbmusic/img/hvbdz-1200x630.png",
"sameAs": [
"https://www.facebook.com/HVB.FAQ",
"https://www.youtube.com/@hvb2017",
"https://www.instagram.com/oba.vh_"
],
"jobTitle": "Artist, Singer, Musician"
}
</script>

<style>
html,
body {
overflow: hidden !important;
overscroll-behavior: none;
}

html, body {
cursor: url("https://1.bp.blogspot.com/-qbWo9mPKO2Y/YL9utYdQBdI/AAAAAAAAFs4/mtjGu6u2uGwtJsT4gZG4lbhLV1a5lG6OQCLcBGAsYHQ/s0/mouse-f1.png"), default;
}
/* T·∫§T C·∫¢ th√†nh ph·∫ßn c√≥ th·ªÉ click */
a,
button,
input[type="button"],
input[type="submit"],
.payment-box a,
.controls button,
.seekbar,
.seekbar-thumb,
#volumeControl,
#volumeIcon,
.overlay,
.cursor-click {
cursor: url("https://1.bp.blogspot.com/-nYv2dLl3oXY/YL9utYBCh8I/AAAAAAAAFtA/wII4lVw5w4k-4isGMY41heTqk8U4TJujgCLcBGAsYHQ/s0/mouse-f2.png"), pointer !important;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

/* Background Sakura */
body {
padding: 0;
margin: 0;
overflow-x: hidden;
height: auto; /* kh√¥ng gi·ªõi h·∫°n chi·ªÅu cao */
}

canvas#sakura {
position: fixed;   /* b√°m v√†o n·ªÅn */
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: -1;       /* n·∫±m d∆∞·ªõi c√πng */
pointer-events: none; /* kh√¥ng ch·∫∑n click v√†o n√∫t kh√°c */
}

div.btnbg {
position: fixed;
left: 0;
top: 0;
}
/* Background Sakura */

body {
background: url("img/") no-repeat center center fixed;
background-size: cover;
font-family: "Segoe UI", sans-serif;
color: white;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
-webkit-user-drag: none;
}

.payment-box {
margin-top: -15px;
margin-bottom: 15px;
}

.payment-box a {
display: inline-block;
padding: 12px 24px;
border: 2px solid #ff0000;
border-radius: 10px;
font-weight: bold;
color: #ffffff;
text-decoration: none;
font-size: 16px;
animation: border-flash 1s infinite;
cursor: pointer;
}

@keyframes border-flash {
0% {
border-color: #ff0000;
box-shadow: 0 0 10px #ff0000;
}
25% {
border-color: #00ff00;
box-shadow: 0 0 10px #00ff00;
}
50% {
border-color: #0000ff;
box-shadow: 0 0 10px #0000ff;
}
75% {
border-color: #ffff00;
box-shadow: 0 0 10px #ffff00;
}
100% {
border-color: #ff0000;
box-shadow: 0 0 10px #ff0000;
}
}

/* NgƒÉn ch·ªçn ·∫£nh v√† vƒÉn b·∫£n kh√¥ng c·∫ßn thi·∫øt */
img.avatar,
img.cover,
.username {
user-select: none !important;
-webkit-user-select: none !important;
-moz-user-select: none !important;
-ms-user-select: none !important;
pointer-events: none;
-webkit-user-drag: none;
}

/* Ch·ªâ t·∫Øt ch·ªçn vƒÉn b·∫£n, KH√îNG t·∫Øt pointer-events ƒë·ªÉ overlay b·∫Øt ƒë∆∞·ª£c click */
.overlay {
user-select: none !important;
-webkit-user-select: none !important;
-moz-user-select: none !important;
-ms-user-select: none !important;
}

.container {
max-width: 420px;
width: 100%;
padding: 30px;
background: rgba(0, 0, 0, 0.5);
border-radius: 20px;
border: 4px solid;
animation: rainbowBorder 5s linear infinite;
text-align: center;
pointer-events: auto;
}

.overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background:
linear-gradient(to bottom right, rgba(0,0,0,0.7), rgba(26,26,26,0.7)),
url("/img/Background Spotify.png") center / cover no-repeat;
color: white;
display: flex;
justify-content: center;
align-items: center;
font-size: 2rem;
font-family: sans-serif;
z-index: 9999;
cursor: pointer;
transition: opacity 0.4s ease;
}

.overlay.hidden {
opacity: 0;
pointer-events: none;
}

@keyframes rainbowBorder {
0% {
border-color: #ff0000;
}
25% {
border-color: #00ff00;
}
50% {
border-color: #0000ff;
}
75% {
border-color: #ff00ff;
}
100% {
border-color: #ff0000;
}
}

.avatar-wrapper {
position: relative;
width: 120px;
height: 120px;
border-radius: 50%;
}

.avatar-wrapper {
position: relative;
width: 120px;
height: 120px;
border-radius: 50%;
margin: 0 auto 20px; /* cƒÉn gi·ªØa v√† c√°ch d∆∞·ªõi */
}

.avatar {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
display: block;
position: relative;
z-index: 2; /* ·∫£nh n·∫±m tr√™n */
}

/* Vi·ªÅn ƒë·ªông nhi·ªÅu m√†u */
.avatar-wrapper::before {
content: "";
position: absolute;
top: -4px; /* ƒë·ªô d√†y vi·ªÅn */
left: -4px;
right: -4px;
bottom: -4px;
border-radius: 50%;
background: conic-gradient(
#ff0000,
#ff7f00,
#ffff00,
#00ff00,
#0000ff,
#4b0082,
#8f00ff,
#ff0000
);
animation: spinBorder 2s linear infinite; /* t·ªëc ƒë·ªô nhanh h∆°n */
z-index: 1;
box-shadow:
0 0 10px rgba(255, 0, 0, 0.6),
0 0 20px rgba(255, 127, 0, 0.6),
0 0 30px rgba(0, 255, 0, 0.6);
}

@keyframes spinBorder {
0% {
transform: rotate(0deg);
}
100% {
transform: rotate(360deg);
}
}

.username {
position: relative;
z-index: 1;
font-size: 30px;
font-weight: bold;
margin-bottom: 20px;
background: linear-gradient(
90deg,
#ff7e5f,
#feb47b,
#6a11cb,
#2575fc,
#2af598,
#9b2af3
);
background-size: 300% 100%;
-webkit-background-clip: text;
color: transparent;
animation: colorChange 3s linear infinite;
}

/* Vi·ªÅn s√°ng nh·∫•p nh√°y */
.username::before {
content: attr(data-text);
position: absolute;
top: 0;
left: 0;
width: 100%;
z-index: -1;
background: linear-gradient(
90deg,
#ff7e5f,
#feb47b,
#6a11cb,
#2575fc,
#2af598,
#9b2af3
);
background-size: 300% 100%;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
animation: colorChange 3s linear infinite;
filter: blur(8px);
}

/* Gradient ch·∫°y */
@keyframes colorChange {
0% {
background-position: 300% 0%;
}
100% {
background-position: -300% 0%;
}
}

.socials {
margin-bottom: 30px;
}

.socials a {
margin: 0 10px;
color: white;
font-size: 22px;
position: relative;
display: inline-block;
transition: 0.3s;
}

/* --- C·∫•u h√¨nh cho Wave Canvas (Visualizer) --- */
#waveCanvas { 
position: fixed; 
top: auto; 
bottom: 0; 
left: 0;
width: 100%;
height: 140px; 
z-index: 1; /* ƒê·∫£m b·∫£o n√≥ n·∫±m ph√≠a sau giao di·ªán ng∆∞·ªùi d√πng */
}

/* Khi hover, t·∫°o m√†u gradient ch·∫°y b√™n trong */
.socials a:hover {
color: transparent;
background: linear-gradient(
90deg,
#ff7e5f,
#feb47b,
#6a11cb,
#2575fc,
#2af598,
#9b2af3
);
background-size: 300% 100%;
-webkit-background-clip: text;
animation: socialColor 3s linear infinite;
}

/* Keyframes cho gradient ch·∫°y */
@keyframes socialColor {
0% {
background-position: 300% 0%;
}
100% {
background-position: -300% 0%;
}
}

.music-player {
display: flex;
align-items: center;
background: rgba(255, 255, 255, 0.1);
border-radius: 15px;
padding: 30px 15px;
gap: 15px;
width: 100%;
justify-content: space-between;
}

.cover {
width: 60px;
height: 60px;
border-radius: 10px;
object-fit: cover;
}

.music-info {
flex: 1;
text-align: left;
}

.title {
font-size: 20px;
font-weight: bold;
position: relative;
top: -5px;
}

.controls {
display: flex;
align-items: center;
gap: 10px;
}

.controls button {
background: none;
border: none;
color: white;
font-size: 25px;
cursor: pointer;
}

.seekbar {
position: relative;
width: 100%;
height: 8px;
background: rgba(255, 255, 255, 0.3);
border-radius: 3px;
overflow: hidden;
}

.seekbar-fill {
height: 100%;
background: #00ffcc;
width: 0%;
transition: 0.1s;
}

.seekbar-thumb {
position: absolute;
top: -5px;
left: -5px;
width: 15px;
height: 15px;
background: #00ffcc;
border-radius: 50%;
cursor: pointer;
transition: background 0.2s;
}

.seekbar-thumb:hover {
background: #ffcc00;
}

.time {
display: flex;
justify-content: space-between;
font-size: 12px;
margin-top: 2px;
color: #ccc;
}

.hvb-copyright {
padding: 6px 12px;
font-weight: bold;
text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00ff,
0 0 30px #ff00ff, 0 0 40px #ff00ff, 0 0 50px #ff00ff, 0 0 75px #ff00ff;
animation: rainbow-border 1.5s infinite linear;
}

@keyframes rainbow-border {
0% {
color: #ff00ff;
text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff, 0 0 20px #ff00ff;
}
14% {
color: #ff0000;
text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000, 0 0 20px #ff0000;
}
28% {
color: #00ff00;
text-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00, 0 0 20px #00ff00;
}
42% {
color: #0000ff;
text-shadow: 0 0 5px #0000ff, 0 0 10px #0000ff, 0 0 20px #0000ff;
}
57% {
color: #ff8800;
text-shadow: 0 0 5px #ff8800, 0 0 10px #ff8800, 0 0 20px #ff8800;
}
71% {
color: #00ffff;
text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff, 0 0 20px #00ffff;
}
100% {
color: #ff00ff;
text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff, 0 0 20px #ff00ff;
}
}
/* Ph·∫ßn Volume */
#volumeControl {
width: 100px;
accent-color: #00ffcc;
cursor: pointer;
transition: opacity 0.3s;
pointer-events: auto !important;
touch-action: auto !important;
user-select: auto !important;
-webkit-user-select: auto !important;
}
#volumeControl:hover {
opacity: 1;
}
.volume-icon {
font-size: 20px;
color: white;
margin-left: 10px;
transition: color 0.3s;
}
.volume-muted {
color: red !important;
}

/* Ph·∫ßn hi·ªÉn th·ªã FPS */
@font-face {
font-family: 'Super Mario 256';
src: url('https://raw.githubusercontent.com/hvbstar/hvbmusic/main/img/SuperMario256.ttf') format('truetype');
font-display: swap;
}

.fps-counter {
position: fixed;
top: 10px;
left: 10px;
font-size: 26px;
font-weight: bold;
color: red;
text-shadow: 
0 0 3px rgba(255, 255, 255, 0.5),  /* Vi·ªÅn s√°ng tr·∫Øng nh·∫π */
0 0 6px rgba(255, 255, 255, 0.3);  /* Hi·ªáu ·ª©ng ph√°t s√°ng gi·∫£m */
z-index: 9997;
padding: 4px 8px;
min-width: 100px;
text-align: center;
background: none;
}

.fps-value {
color: #ff0000;
font-family: 'Super Mario 256', sans-serif;
}

@keyframes colorRotate {
0% { color: #FF0000; }
25% { color: #00FFFF; }
50% { color: #00FF00; }
75% { color: #FFFF00; }
100% { color: #FF0000; }
}

/* Hi·ªáu ·ª©ng tuy·∫øt r∆°i */
#snowflakeContainer{position:absolute;left:0px;top:0px;}
.snowflake{padding-left:15px;font-size:14px;line-height:24px;position:fixed;color:#ebebeb;user-select:none;z-index:10000;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;}
.snowflake:hover {cursor:default}

/* Hi·ªáu ·ª©ng l√° c·ªù VN tung bay */
/* --- BI·∫æN S·ªê CHUNG --- */
:root {
--glow-color: #ffd700; /* M√†u v√†ng c∆° b·∫£n cho hi·ªáu ·ª©ng s√°ng */
}

/* ƒê·ªãnh d·∫°ng c∆° b·∫£n (N·ªÅn t·ªëi ƒë·ªÉ l√†m n·ªïi b·∫≠t hi·ªáu ·ª©ng Glow) */
body {
margin: 0; padding: 0; min-height: 100vh;
display: flex; flex-direction: column; align-items: center;
background-color: #0d1117; 
overflow-x: hidden; position: relative; 
/* font-family: sans-serif; color: #f0f0f0; */
}

/* --- V·ªä TR√ç C·ªú (C√ÇN X·ª®NG V·ªöI FPS V√Ä COUNTER) --- */
.flag-container {
position: absolute; 
top: 8px; /* C√¢n x·ª©ng theo chi·ªÅu d·ªçc v·ªõi c√°c b·ªô ƒë·∫øm ·ªü hai b√™n */
left: 50%;
transform: translateX(-50%); /* CƒÉn gi·ªØa tuy·ªát ƒë·ªëi */
z-index: 100;
}

#vietnamFlagCanvas {
display: block;
width: 200px; height: 100px; /* K√≠ch th∆∞·ªõc c·ªù hi·ªÉn th·ªã */
border-radius: 8px;

/* √Åp d·ª•ng hi·ªáu ·ª©ng nh√°y s√°ng nhi·ªÅu m√†u */
animation: multi-color-glow 2.5s linear infinite alternate; 
}

/* --- @KEYFRAMES HI·ªÜU ·ª®NG NH√ÅY S√ÅNG R·ª∞C R·ª† NH·∫§T --- */
@keyframes multi-color-glow {
/* TƒÉng c∆∞·ªùng ƒë·ªô s√°ng (box-shadow r·ªông v√† filter > 1.0) */
0% { 
box-shadow: 
0 0 20px rgba(255, 0, 0, 1.0),   /* ƒê·ªè r·ª±c ch√≥i */
0 0 40px rgba(255, 0, 255, 1.0); /* H·ªìng r·ª±c ch√≥i */
filter: brightness(1.3); /* L√†m l√° c·ªù s√°ng b·ª´ng */
}
25% { 
box-shadow: 
0 0 20px rgba(255, 255, 0, 1.0),  /* V√†ng r·ª±c ch√≥i */
0 0 40px rgba(0, 255, 255, 1.0);  /* Xanh ng·ªçc r·ª±c ch√≥i */
filter: brightness(1.4); 
}
50% { 
box-shadow: 
0 0 20px rgba(0, 255, 0, 1.0),   /* Xanh l√° r·ª±c ch√≥i */
0 0 40px rgba(0, 0, 255, 1.0);   /* Xanh d∆∞∆°ng r·ª±c ch√≥i */
filter: brightness(1.3); 
}
75% { 
box-shadow: 
0 0 20px rgba(255, 0, 255, 1.0), /* T√≠m r·ª±c ch√≥i */
0 0 40px rgba(255, 165, 0, 1.0); /* Cam r·ª±c ch√≥i */
filter: brightness(1.4); 
}
100% { 
box-shadow: 
0 0 20px rgba(255, 0, 0, 1.0),
0 0 40px rgba(255, 0, 255, 1.0);
filter: brightness(1.3); 
}
}

/* --- HI·ªÜU ·ª®NG H·∫†T L·∫§P L√ÅNH N·ªÄN --- */
.sparkle {
position: absolute;
background: radial-gradient(circle at center, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0)); 
border-radius: 50%; opacity: 0; pointer-events: none;
animation: sparkle-fall linear infinite;
}

@keyframes sparkle-fall {
0% { transform: translateY(-50px) scale(0); opacity: 0; }
10% { opacity: 0.8; transform: scale(1); }
100% { transform: translateY(100vh) scale(0.5); opacity: 0; }
}
</style>
</head>
<body>

<!-- L√° C·ªù VN Tung Bay -->
<div class="flag-container">
<canvas id="vietnamFlagCanvas" width="240" height="160"></canvas>
</div>

<div id="particle-overlay"></div>

<div class="container">
<div class="avatar-wrapper">
<img class="avatar" src="img/Artist HVB.jpg" alt="Avatar" />
</div>
<div class="username" data-text="Ho√†ng VƒÉn B·∫£o ‚ô°">Ho√†ng VƒÉn B·∫£o ‚ô°</div>

<!-- FPS -->
<div id="fpsCounter" class="fps-counter">
<span class="fps-value">0.0 FPS</span>
</div>

<div id="dateCreatedWrapper" style="
position: fixed;
bottom: 50px;          /* ch·ªânh cao/th·∫•p */
left: 50%;
transform: translateX(-50%);
font-family: 'Rowdies', sans-serif;
font-size: 16px;       /* ch·ªânh c·ª° ch·ªØ */
font-weight: 800;      /* ch·ªânh ƒë·ªô d√†y */
z-index: 9998;        /* c·ª±c cao ƒë·ªÉ n·∫±m tr√™n overlay */
white-space: nowrap;
">
<strong style="color: #FF0000;">Date created:&ensp;</strong>
<span id="momk" style="
animation: colorRotate 0.8s linear infinite;
">Loading...</span>
</div>

<div class="socials">
<a href="https://www.facebook.com/HVB.FAQ" target="_blank"
><i class="fab fa-facebook-f"></i
></a>
<a href="https://www.instagram.com/oba.vh_" target="_blank"
><i class="fab fa-instagram"></i
></a>
<a
href="https://open.spotify.com/artist/6NyGoNlK1jpmDs2yL5NRQt"
target="_blank"
><i class="fa-brands fa-spotify"></i
></a>
<a href="https://www.youtube.com/@hvb2017" target="_blank"
><i class="fab fa-youtube"></i
></a>
<a href="https://www.tiktok.com/@_.hvb" target="_blank"
><i class="fab fa-tiktok"></i
></a>
<a href="https://t.me/hvb_ip" target="_blank"
><i class="fab fa-telegram-plane"></i
></a>
<a href="https://zalo.me/0395152981" target="_blank"
><i class="fa-brands fa-facebook-messenger"></i
></a>
</div>
<div class="social-icons">
<a href="#"><i class="ri-facebook-fill"></i></a>
<a href="#"><i class="ri-instagram-fill"></i></a>
<a href="#"><i class="ri-spotify-fill"></i></a>
<a href="#"><i class="ri-youtube-fill"></i></a>
<a href="#"><i class="ri-tiktok-fill"></i></a>
<a href="#"><i class="ri-telegram-fill"></i></a>
<a href="#"><i class="ri-messenger-fill"></i></a>
</div>
<div class="payment-box">
<a href="legit.html" target="_blank">Th√¥ng Tin Thanh To√°n</a>
</div>

<canvas id="waveCanvas"></canvas> 

<audio id="audio"></audio> 

<div class="music-player">
<img class="cover" src="img/AVT Ngh·ªá Sƒ©.jpg" alt="Cover" />
<div class="music-info">
<div class="title" id="song-title">SONG_TITLE_1</div>
<div class="controls">
<button onclick="prevSong()">
<i class="fas fa-backward"></i>
</button>
<button onclick="togglePlay()" id="play-btn">
<i class="fas fa-play"></i>
</button>
<button onclick="nextSong()"><i class="fas fa-forward"></i></button>
<i id="volumeIcon" class="fas fa-volume-up volume-icon"></i>
<input
type="range"
id="volumeControl"
min="0"
max="1"
step="0.01"
value="1"
title="√Çm l∆∞·ª£ng"
/>
</div>
<div class="seekbar" onclick="seek(event)">
<div class="seekbar-fill" id="progress"></div>
<div class="seekbar-thumb" id="thumb"></div>
</div>
<div class="time">
<span id="current">0:00</span>
<span id="duration">0:00</span>
</div>
</div>
</div>

<!-- Overlay -->
<div id="overlay" class="overlay">
<div class="overlay-content">Click To Enter</div>
</div>
<!-- Audio -->
<audio id="audio" preload="auto"></audio>
</div>

<script>
// Background Sakura
// Utilities
var Vector3 = {};
var Matrix44 = {};
Vector3.create = function(x, y, z) {
return {'x':x, 'y':y, 'z':z};
};
Vector3.dot = function (v0, v1) {
return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;
};
Vector3.cross = function (v, v0, v1) {
v.x = v0.y * v1.z - v0.z * v1.y;
v.y = v0.z * v1.x - v0.x * v1.z;
v.z = v0.x * v1.y - v0.y * v1.x;
};
Vector3.normalize = function (v) {
var l = v.x * v.x + v.y * v.y + v.z * v.z;
if(l > 0.00001) {
l = 1.0 / Math.sqrt(l);
v.x *= l;
v.y *= l;
v.z *= l;
}
};
Vector3.arrayForm = function(v) {
if(v.array) {
v.array[0] = v.x;
v.array[1] = v.y;
v.array[2] = v.z;
}
else {
v.array = new Float32Array([v.x, v.y, v.z]);
}
return v.array;
};
Matrix44.createIdentity = function () {
return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);
};
Matrix44.loadProjection = function (m, aspect, vdeg, near, far) {
var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;
var w = h * aspect;

m[0] = 2.0 * near / w;
m[1] = 0.0;
m[2] = 0.0;
m[3] = 0.0;

m[4] = 0.0;
m[5] = 2.0 * near / h;
m[6] = 0.0;
m[7] = 0.0;

m[8] = 0.0;
m[9] = 0.0;
m[10] = -(far + near) / (far - near);
m[11] = -1.0;

m[12] = 0.0;
m[13] = 0.0;
m[14] = -2.0 * far * near / (far - near);
m[15] = 0.0;
};
Matrix44.loadLookAt = function (m, vpos, vlook, vup) {
var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);
Vector3.normalize(frontv);
var sidev = Vector3.create(1.0, 0.0, 0.0);
Vector3.cross(sidev, vup, frontv);
Vector3.normalize(sidev);
var topv = Vector3.create(1.0, 0.0, 0.0);
Vector3.cross(topv, frontv, sidev);
Vector3.normalize(topv);

m[0] = sidev.x;
m[1] = topv.x;
m[2] = frontv.x;
m[3] = 0.0;

m[4] = sidev.y;
m[5] = topv.y;
m[6] = frontv.y;
m[7] = 0.0;

m[8] = sidev.z;
m[9] = topv.z;
m[10] = frontv.z;
m[11] = 0.0;

m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);
m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);
m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);
m[15] = 1.0;
};

//
var timeInfo = {
'start':0, 'prev':0, // Date
'delta':0, 'elapsed':0 // Number(sec)
};

//
var gl;
var renderSpec = {
'width':0,
'height':0,
'aspect':1,
'array':new Float32Array(3),
'halfWidth':0,
'halfHeight':0,
'halfArray':new Float32Array(3)
// and some render targets. see setViewport()
};
renderSpec.setSize = function(w, h) {
renderSpec.width = w;
renderSpec.height = h;
renderSpec.aspect = renderSpec.width / renderSpec.height;
renderSpec.array[0] = renderSpec.width;
renderSpec.array[1] = renderSpec.height;
renderSpec.array[2] = renderSpec.aspect;

renderSpec.halfWidth = Math.floor(w / 2);
renderSpec.halfHeight = Math.floor(h / 2);
renderSpec.halfArray[0] = renderSpec.halfWidth;
renderSpec.halfArray[1] = renderSpec.halfHeight;
renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;
};

function deleteRenderTarget(rt) {
gl.deleteFramebuffer(rt.frameBuffer);
gl.deleteRenderbuffer(rt.renderBuffer);
gl.deleteTexture(rt.texture);
}

function createRenderTarget(w, h) {
var ret = {
'width':w,
'height':h,
'sizeArray':new Float32Array([w, h, w / h]),
'dtxArray':new Float32Array([1.0 / w, 1.0 / h])
};
ret.frameBuffer = gl.createFramebuffer();
ret.renderBuffer = gl.createRenderbuffer();
ret.texture = gl.createTexture();

gl.bindTexture(gl.TEXTURE_2D, ret.texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);
gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);

gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);
gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);
gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);

gl.bindTexture(gl.TEXTURE_2D, null);
gl.bindRenderbuffer(gl.RENDERBUFFER, null);
gl.bindFramebuffer(gl.FRAMEBUFFER, null);

return ret;
}

function compileShader(shtype, shsrc) {
var retsh = gl.createShader(shtype);

gl.shaderSource(retsh, shsrc);
gl.compileShader(retsh);

if(!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {
var errlog = gl.getShaderInfoLog(retsh);
gl.deleteShader(retsh);
console.error(errlog);
return null;
}
return retsh;
}

function createShader(vtxsrc, frgsrc, uniformlist, attrlist) {
var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);
var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);

if(vsh == null || fsh == null) {
return null;
}

var prog = gl.createProgram();
gl.attachShader(prog, vsh);
gl.attachShader(prog, fsh);

gl.deleteShader(vsh);
gl.deleteShader(fsh);

gl.linkProgram(prog);
if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {
var errlog = gl.getProgramInfoLog(prog);
console.error(errlog);
return null;
}

if(uniformlist) {
prog.uniforms = {};
for(var i = 0; i < uniformlist.length; i++) {
prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);
}
}

if(attrlist) {
prog.attributes = {};
for(var i = 0; i < attrlist.length; i++) {
var attr = attrlist[i];
prog.attributes[attr] = gl.getAttribLocation(prog, attr);
}
}

return prog;
}

function useShader(prog) {
gl.useProgram(prog);
for(var attr in prog.attributes) {
gl.enableVertexAttribArray(prog.attributes[attr]);;
}
}

function unuseShader(prog) {
for(var attr in prog.attributes) {
gl.disableVertexAttribArray(prog.attributes[attr]);;
}
gl.useProgram(null);
}

/////
var projection = {
'angle':60,
'nearfar':new Float32Array([0.1, 100.0]),
'matrix':Matrix44.createIdentity()
};
var camera = {
'position':Vector3.create(0, 0, 100),
'lookat':Vector3.create(0, 0, 0),
'up':Vector3.create(0, 1, 0),
'dof':Vector3.create(10.0, 4.0, 8.0),
'matrix':Matrix44.createIdentity()
};

var pointFlower = {};
var meshFlower = {};
var sceneStandBy = false;

var BlossomParticle = function () {
this.velocity = new Array(3);
this.rotation = new Array(3);
this.position = new Array(3);
this.euler = new Array(3);
this.size = 1.0;
this.alpha = 1.0;
this.zkey = 0.0;
};

BlossomParticle.prototype.setVelocity = function (vx, vy, vz) {
this.velocity[0] = vx;
this.velocity[1] = vy;
this.velocity[2] = vz;
};

BlossomParticle.prototype.setRotation = function (rx, ry, rz) {
this.rotation[0] = rx;
this.rotation[1] = ry;
this.rotation[2] = rz;
};

BlossomParticle.prototype.setPosition = function (nx, ny, nz) {
this.position[0] = nx;
this.position[1] = ny;
this.position[2] = nz;
};

BlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {
this.euler[0] = rx;
this.euler[1] = ry;
this.euler[2] = rz;
};

BlossomParticle.prototype.setSize = function (s) {
this.size = s;
};

BlossomParticle.prototype.update = function (dt, et) {
this.position[0] += this.velocity[0] * dt;
this.position[1] += this.velocity[1] * dt;
this.position[2] += this.velocity[2] * dt;

this.euler[0] += this.rotation[0] * dt;
this.euler[1] += this.rotation[1] * dt;
this.euler[2] += this.rotation[2] * dt;
};

function createPointFlowers() {
// get point sizes
var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);
renderSpec.pointSize = {'min':prm[0], 'max':prm[1]};

var vtxsrc = document.getElementById("sakura_point_vsh").textContent;
var frgsrc = document.getElementById("sakura_point_fsh").textContent;

pointFlower.program = createShader(
vtxsrc, frgsrc,
['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],
['aPosition', 'aEuler', 'aMisc']
);

useShader(pointFlower.program);
pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);
pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);

// paramerters: velocity[3], rotate[3]
pointFlower.numFlowers = 1600;
pointFlower.particles = new Array(pointFlower.numFlowers);
// vertex attributes {position[3], euler_xyz[3], size[1]}
pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));
pointFlower.positionArrayOffset = 0;
pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;
pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;

pointFlower.buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);
gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);
gl.bindBuffer(gl.ARRAY_BUFFER, null);

unuseShader(pointFlower.program);

for(var i = 0; i < pointFlower.numFlowers; i++) {
pointFlower.particles[i] = new BlossomParticle();
}
}

function initPointFlowers() {
//area
pointFlower.area = Vector3.create(20.0, 20.0, 20.0);
pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;

pointFlower.fader.x = 10.0; //env fade start
pointFlower.fader.y = pointFlower.area.z; //env fade half
pointFlower.fader.z = 0.1;  //near fade start

//particles
var PI2 = Math.PI * 2.0;
var tmpv3 = Vector3.create(0, 0, 0);
var tmpv = 0;
var symmetryrand = function() {return (Math.random() * 2.0 - 1.0);};
for(var i = 0; i < pointFlower.numFlowers; i++) {
var tmpprtcl = pointFlower.particles[i];

//velocity
tmpv3.x = symmetryrand() * 0.3 + 0.8;
tmpv3.y = symmetryrand() * 0.2 - 1.0;
tmpv3.z = symmetryrand() * 0.3 + 0.5;
Vector3.normalize(tmpv3);
tmpv = 2.0 + Math.random() * 1.0;
tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);

//rotation
tmpprtcl.setRotation(
symmetryrand() * PI2 * 0.5,
symmetryrand() * PI2 * 0.5,
symmetryrand() * PI2 * 0.5
);

//position
tmpprtcl.setPosition(
symmetryrand() * pointFlower.area.x,
symmetryrand() * pointFlower.area.y,
symmetryrand() * pointFlower.area.z
);

//euler
tmpprtcl.setEulerAngles(
Math.random() * Math.PI * 2.0,
Math.random() * Math.PI * 2.0,
Math.random() * Math.PI * 2.0
);

//size
tmpprtcl.setSize(0.9 + Math.random() * 0.1);
}
}

function renderPointFlowers() {
//update
var PI2 = Math.PI * 2.0;
var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];
var repeatPos = function (prt, cmp, limit) {
if(Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {
//out of area
if(prt.position[cmp] > 0) {
prt.position[cmp] -= limit * 2.0;
}
else {
prt.position[cmp] += limit * 2.0;
}
}
};
var repeatEuler = function (prt, cmp) {
prt.euler[cmp] = prt.euler[cmp] % PI2;
if(prt.euler[cmp] < 0.0) {
prt.euler[cmp] += PI2;
}
};

for(var i = 0; i < pointFlower.numFlowers; i++) {
var prtcl = pointFlower.particles[i];
prtcl.update(timeInfo.delta, timeInfo.elapsed);
repeatPos(prtcl, 0, pointFlower.area.x);
repeatPos(prtcl, 1, pointFlower.area.y);
repeatPos(prtcl, 2, pointFlower.area.z);
repeatEuler(prtcl, 0);
repeatEuler(prtcl, 1);
repeatEuler(prtcl, 2);

prtcl.alpha = 1.0;//(pointFlower.area.z - prtcl.position[2]) * 0.5;

prtcl.zkey = (camera.matrix[2] * prtcl.position[0]
+ camera.matrix[6] * prtcl.position[1]
+ camera.matrix[10] * prtcl.position[2]
+ camera.matrix[14]);
}

// sort
pointFlower.particles.sort(function(p0, p1){return p0.zkey - p1.zkey;});

// update data
var ipos = pointFlower.positionArrayOffset;
var ieuler = pointFlower.eulerArrayOffset;
var imisc = pointFlower.miscArrayOffset;
for(var i = 0; i < pointFlower.numFlowers; i++) {
var prtcl = pointFlower.particles[i];
pointFlower.dataArray[ipos] = prtcl.position[0];
pointFlower.dataArray[ipos + 1] = prtcl.position[1];
pointFlower.dataArray[ipos + 2] = prtcl.position[2];
ipos += 3;
pointFlower.dataArray[ieuler] = prtcl.euler[0];
pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];
pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];
ieuler += 3;
pointFlower.dataArray[imisc] = prtcl.size;
pointFlower.dataArray[imisc + 1] = prtcl.alpha;
imisc += 2;
}

//draw
gl.enable(gl.BLEND);
//gl.disable(gl.DEPTH_TEST);
gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

var prog = pointFlower.program;
useShader(prog);

gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);
gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);
gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);
gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));
gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));

gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);
gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);

gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT);
gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT);
gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT);

// doubler
for(var i = 1; i < 2; i++) {
var zpos = i * -2.0;
pointFlower.offset[0] = pointFlower.area.x * -1.0;
pointFlower.offset[1] = pointFlower.area.y * -1.0;
pointFlower.offset[2] = pointFlower.area.z * zpos;
gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

pointFlower.offset[0] = pointFlower.area.x * -1.0;
pointFlower.offset[1] = pointFlower.area.y *  1.0;
pointFlower.offset[2] = pointFlower.area.z * zpos;
gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

pointFlower.offset[0] = pointFlower.area.x *  1.0;
pointFlower.offset[1] = pointFlower.area.y * -1.0;
pointFlower.offset[2] = pointFlower.area.z * zpos;
gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

pointFlower.offset[0] = pointFlower.area.x *  1.0;
pointFlower.offset[1] = pointFlower.area.y *  1.0;
pointFlower.offset[2] = pointFlower.area.z * zpos;
gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);
}

//main
pointFlower.offset[0] = 0.0;
pointFlower.offset[1] = 0.0;
pointFlower.offset[2] = 0.0;
gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

gl.bindBuffer(gl.ARRAY_BUFFER, null);
unuseShader(prog);

gl.enable(gl.DEPTH_TEST);
gl.disable(gl.BLEND);
}

// effects
//common util
function createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {
var ret = {};
var unifs = ['uResolution', 'uSrc', 'uDelta'];
if(exunifs) {
unifs = unifs.concat(exunifs);
}
var attrs = ['aPosition'];
if(exattrs) {
attrs = attrs.concat(exattrs);
}

ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);
useShader(ret.program);

ret.dataArray = new Float32Array([
-1.0, -1.0,
1.0, -1.0,
-1.0,  1.0,
1.0,  1.0
]);
ret.buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);
gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);

gl.bindBuffer(gl.ARRAY_BUFFER, null);
unuseShader(ret.program);

return ret;
}

// basic usage
// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize
// gl.uniform**(...); //additional uniforms
// drawEffect()
// unuseEffect(prog)
// TEXTURE0 makes src
function useEffect(fxobj, srctex) {
var prog = fxobj.program;
useShader(prog);
gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);

if(srctex != null) {
gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);
gl.uniform1i(prog.uniforms.uSrc, 0);

gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, srctex.texture);
}
}
function drawEffect(fxobj) {
gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);
gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);
gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
}
function unuseEffect(fxobj) {
unuseShader(fxobj.program);
}

var effectLib = {};
function createEffectLib() {

var vtxsrc, frgsrc;
//common
var cmnvtxsrc = document.getElementById("fx_common_vsh").textContent;

//background
frgsrc = document.getElementById("bg_fsh").textContent;
effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);

// make brightpixels buffer
frgsrc = document.getElementById("fx_brightbuf_fsh").textContent;
effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);

// direction blur
frgsrc = document.getElementById("fx_dirblur_r4_fsh").textContent;
effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);

//final composite
vtxsrc = document.getElementById("pp_final_vsh").textContent;
frgsrc = document.getElementById("pp_final_fsh").textContent;
effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);
}

// background
function createBackground() {
//console.log("create background");
}
function initBackground() {
//console.log("init background");
}
function renderBackground() {
gl.disable(gl.DEPTH_TEST);

useEffect(effectLib.sceneBg, null);
gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);
drawEffect(effectLib.sceneBg);
unuseEffect(effectLib.sceneBg);

gl.enable(gl.DEPTH_TEST);
}

// post process
var postProcess = {};
function createPostProcess() {
//console.log("create post process");
}
function initPostProcess() {
//console.log("init post process");
}

function renderPostProcess() {
gl.enable(gl.TEXTURE_2D);
gl.disable(gl.DEPTH_TEST);
var bindRT = function (rt, isclear) {
gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);
gl.viewport(0, 0, rt.width, rt.height);
if(isclear) {
gl.clearColor(0, 0, 0, 0);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
}
};

//make bright buff
bindRT(renderSpec.wHalfRT0, true);
useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);
drawEffect(effectLib.mkBrightBuf);
unuseEffect(effectLib.mkBrightBuf);

// make bloom
for(var i = 0; i < 2; i++) {
var p = 1.5 + 1 * i;
var s = 2.0 + 1 * i;
bindRT(renderSpec.wHalfRT1, true);
useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);
gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);
drawEffect(effectLib.dirBlur);
unuseEffect(effectLib.dirBlur);

bindRT(renderSpec.wHalfRT0, true);
useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);
gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);
drawEffect(effectLib.dirBlur);
unuseEffect(effectLib.dirBlur);
}

//display
gl.bindFramebuffer(gl.FRAMEBUFFER, null);
gl.viewport(0, 0, renderSpec.width, renderSpec.height);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

useEffect(effectLib.finalComp, renderSpec.mainRT);
gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);
gl.activeTexture(gl.TEXTURE1);
gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);
drawEffect(effectLib.finalComp);
unuseEffect(effectLib.finalComp);

gl.enable(gl.DEPTH_TEST);
}

/////
var SceneEnv = {};
function createScene() {
createEffectLib();
createBackground();
createPointFlowers();
createPostProcess();
sceneStandBy = true;
}

function initScene() {
initBackground();
initPointFlowers();
initPostProcess();

//camera.position.z = 17.320508;
camera.position.z = pointFlower.area.z + projection.nearfar[0];
projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;
Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection.nearfar[1]);
}

function renderScene() {
//draw
Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);

gl.enable(gl.DEPTH_TEST);

//gl.bindFramebuffer(gl.FRAMEBUFFER, null);
gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);
gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);
gl.clearColor(0.005, 0, 0.05, 0);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

renderBackground();
renderPointFlowers();
renderPostProcess();
}

/////
function onResize(e) {
makeCanvasFullScreen(document.getElementById("sakura"));
setViewports();
if(sceneStandBy) {
initScene();
}
}

function setViewports() {
renderSpec.setSize(gl.canvas.width, gl.canvas.height);

gl.clearColor(0.2, 0.2, 0.5, 1.0);
gl.viewport(0, 0, renderSpec.width, renderSpec.height);

var rtfunc = function (rtname, rtw, rth) {
var rt = renderSpec[rtname];
if(rt) deleteRenderTarget(rt);
renderSpec[rtname] = createRenderTarget(rtw, rth);
};
rtfunc('mainRT', renderSpec.width, renderSpec.height);
rtfunc('wFullRT0', renderSpec.width, renderSpec.height);
rtfunc('wFullRT1', renderSpec.width, renderSpec.height);
rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);
rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);
}

function render() {
renderScene();
}

var animating = true;
function toggleAnimation(elm) {
animating ^= true;
if(animating) animate();
if(elm) {
elm.innerHTML = animating? "Stop":"Start";
}
}

function stepAnimation() {
if(!animating) animate();
}

function animate() {
var curdate = new Date();
timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;
timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;
timeInfo.prev = curdate;

if(animating) requestAnimationFrame(animate);
render();
}

function makeCanvasFullScreen(canvas) {
var b = document.body;
var d = document.documentElement;
fullw = Math.max(b.clientWidth , b.scrollWidth, d.scrollWidth, d.clientWidth);
fullh = Math.max(b.clientHeight , b.scrollHeight, d.scrollHeight, d.clientHeight);
canvas.width = fullw;
canvas.height = fullh;
}

window.addEventListener('load', function(e) {
var canvas = document.getElementById("sakura");
try {
makeCanvasFullScreen(canvas);
gl = canvas.getContext('experimental-webgl');
} catch(e) {
alert("WebGL not supported." + e);
console.error(e);
return;
}

window.addEventListener('resize', onResize);

setViewports();
createScene();
initScene();

timeInfo.start = new Date();
timeInfo.prev = timeInfo.start;
animate();
});

//set window.requestAnimationFrame
(function (w, r) {
w['r'+r] = w['r'+r] || w['webkitR'+r] || w['mozR'+r] || w['msR'+r] || w['oR'+r] || function(c){ w.setTimeout(c, 1000 / 60); };
})(window, 'equestAnimationFrame');
// Background Sakura

// Ph·∫ßn hi·ªÉn th·ªã FPS
function updateFPS() {
let fpsElement = document.querySelector("#fpsCounter .fps-value"); // L·∫•y ph·∫ßn t·ª≠ hi·ªÉn th·ªã FPS
let lastFrameTime = performance.now();
let frameCount = 0;

function refreshFPS() {
let now = performance.now();
frameCount++;

if (now - lastFrameTime >= 1000) { // C·∫≠p nh·∫≠t m·ªói gi√¢y
let fps = Math.round(frameCount / ((now - lastFrameTime) / 1000)); // Ch·ªâ l·∫•y s·ªë nguy√™n
fpsElement.textContent = `${fps} FPS`;
lastFrameTime = now;
frameCount = 0;
}

requestAnimationFrame(refreshFPS);
}

refreshFPS();
}

document.addEventListener("DOMContentLoaded", function () {
updateFPS();
});

/* =========================================================
CH√ö √ù: ƒêO·∫†N M√É JAVASCRIPT ƒê√É ƒê∆Ø·ª¢C H·ª¢P NH·∫§T V√Ä S·ª¨A L·ªñI 
=========================================================
*/

// =============================================================
// I. C√ÅC BI·∫æN V√Ä H√ÄM CHO VISUALIZER (S√≥ng C·∫ßu V·ªìng Ch·∫°y)
// =============================================================

const waveCanvas = document.getElementById('waveCanvas');
const wctx = waveCanvas.getContext('2d');
let audioCtx, analyser, dataArray, source; // Bi·∫øn cho Web Audio API
let hueOffset = 0; // Bi·∫øn d√πng cho hi·ªáu ·ª©ng c·∫ßu v·ªìng ch·∫°y

// H√†m ƒëi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc Canvas
function resizeWaveCanvas() {
waveCanvas.width = window.innerWidth;
waveCanvas.height = 140; 
}
window.addEventListener('resize', resizeWaveCanvas);
resizeWaveCanvas();

// H√ÄM KH·ªûI T·∫†O VISUALIZER
function initVisualizer(){
if(audioCtx) return; 
try {
audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// üí° K·∫æT N·ªêI: D√πng bi·∫øn 'audio' t·ª´ playlist
source = audioCtx.createMediaElementSource(audio); 

analyser = audioCtx.createAnalyser();
analyser.fftSize = 256; 

source.connect(analyser);
analyser.connect(audioCtx.destination);

dataArray = new Uint8Array(analyser.frequencyBinCount);

drawWave();
} catch (e) {
console.error("L·ªói kh·ªüi t·∫°o AudioContext:", e);
}
}

// H√ÄM V·∫º S√ìNG √ÇM THANH (HI·ªÜU ·ª®NG C·∫¶U V·ªíNG CH·∫†Y)
function drawWave(){
requestAnimationFrame(drawWave); 

if (!analyser || !dataArray) return;

analyser.getByteFrequencyData(dataArray);
wctx.clearRect(0, 0, waveCanvas.width, waveCanvas.height);

const bufferLength = analyser.frequencyBinCount;
const barWidth = (waveCanvas.width / bufferLength) * 1.5; 
let barHeight;
let x = 0; 

// TƒÉng ƒë·ªô d·ªãch chuy·ªÉn m√†u (T·∫°o hi·ªáu ·ª©ng ch·∫°y)
hueOffset = (hueOffset + 1.5) % 360; // T·ªëc ƒë·ªô d·ªãch chuy·ªÉn 1.5 ƒë∆°n v·ªã m·ªói frame

for(let i = 0; i < bufferLength; i++) {
barHeight = dataArray[i] / 2;

// T√≠nh to√°n Hue: v·ªã tr√≠ + d·ªãch chuy·ªÉn theo th·ªùi gian
const hue = (i * 1.5) + hueOffset; 

// G√°n m√†u HSL (S·∫Øc th√°i m√†u, 80% ƒë·ªô b√£o h√≤a, 50% ƒë·ªô s√°ng)
wctx.fillStyle = `hsl(${hue % 360}, 80%, 50%)`; 

wctx.fillRect(
x, 
waveCanvas.height - barHeight,
barWidth, 
barHeight
);
x += barWidth + 1;
}
}


// =============================================================
// II. C√ÅC BI·∫æN V√Ä H√ÄM CHO PLAYLIST & VOLUME 
// =============================================================

// Khai b√°o bi·∫øn Playlist
const audio = document.getElementById("audio");
const playBtn = document.getElementById("play-btn");
const progress = document.getElementById("progress");
const thumb = document.getElementById("thumb");
const current = document.getElementById("current");
const duration = document.getElementById("duration");
const title = document.getElementById("song-title");

// Khai b√°o bi·∫øn Volume
const volumeControl = document.getElementById("volumeControl");
const volumeIcon = document.getElementById("volumeIcon");

const songs = [
{ title: "N∆∞·ªõc M·∫Øt Mu·ªôn M√†ng", src: "audio/N∆∞·ªõc M·∫Øt Mu·ªôn M√†ng Ft Kho·∫£ng C√°ch.mp3", },
{ title: "Ch·ªâ B·∫±ng M·ªôt C√°i G·∫≠t ƒê·∫ßu", src: "audio/Ch·ªâ B·∫±ng M·ªôt C√°i G·∫≠t ƒê·∫ßu Remix.mp3" },
{ title: "C·∫£ Cu·ªôc ƒê·ªùi N√†y Anh Kh√¥ng Tha Th·ª©", src: "audio/C·∫£ Cu·ªôc ƒê·ªùi N√†y Anh Kh√¥ng Tha Th·ª© Remix.mp3" },
{ title: "B√¥ng Hoa N·ªü Mu·ªôn", src: "audio/B√¥ng Hoa N·ªü Mu·ªôn Remix.mp3" },
{ title: "ƒê·ªïi T√¨nh ƒê·ªïi √Åo ƒê·ªïi Anh", src: "audio/ƒê·ªïi T√¨nh ƒê·ªïi √Åo ƒê·ªïi Anh Remix.mp3" },
{ title: "D√π Anh Bi·∫øt T·∫•t C·∫£ ƒê√£ M√£i Xa R·ªìi Remix", src: "audio/D√π Anh Bi·∫øt T·∫•t C·∫£ ƒê√£ M√£i Xa R·ªìi Remix.mp3" },
{ title: "B√™n Nhau Th·∫≠t Kh√≥ Remix", src: "audio/B√™n Nhau Th·∫≠t Kh√≥ Remix.mp3" },
{ title: "L√† Anh", src: "audio/L√† Anh - T√∫ Sena.mp3" },
{ title: "G·∫∑p M·∫π Trong Bar", src: "audio/G·∫∑p M·∫π Trong Bar.mp3" },
{ title: "Ch·ªù Ng∆∞·ªùi N∆°i ·∫§y Remix", src: "audio/Ch·ªù Ng∆∞·ªùi N∆°i ·∫§y Remix.mp3", },
{ title: "Bi·∫øt ƒêau Nh∆∞ng V·∫´n Y√™u", src: "audio/Bi·∫øt ƒêau Nh∆∞ng V·∫´n Y√™u.mp3", },
{ title: "C√≥ Anh ·ªû ƒê√¢y R·ªìi Remix", src: "audio/C√≥ Anh ·ªû ƒê√¢y R·ªìi - Slex Remix.mp3", },
];
let currentIndex = 0;
let isPlaying = false;

// C√°c h√†m Playlist
function togglePlay() {
if (audio.paused) {
audio.play();
isPlaying = true;
playBtn.innerHTML = '<i class="fas fa-pause"></i>';
} else {
audio.pause();
isPlaying = false;
playBtn.innerHTML = '<i class="fas fa-play"></i>';
}
}

function updateProgress() {
const percent = (audio.currentTime / audio.duration) * 100;
progress.style.width = percent + "%";
thumb.style.left = `calc(${percent}% - 7px)`;
current.textContent = formatTime(audio.currentTime);
duration.textContent = formatTime(audio.duration);
}

function formatTime(t) {
const hrs = Math.floor(t / 3600);
const mins = Math.floor((t % 3600) / 60);
const secs = Math.floor(t % 60).toString().padStart(2, "0");
return hrs > 0
? `${hrs}:${mins.toString().padStart(2, "0")}:${secs}`
: `${mins}:${secs}`;
}

function seek(e) {
const rect = e.currentTarget.getBoundingClientRect();
const percent = (e.clientX - rect.left) / rect.width;
audio.currentTime = percent * audio.duration;
}

function nextSong() {
currentIndex = (currentIndex + 1) % songs.length;
isPlaying = true;
loadSong(currentIndex);
}

function prevSong() {
currentIndex = (currentIndex - 1 + songs.length) % songs.length;
isPlaying = true;
loadSong(currentIndex);
}

function loadSong(index) {
audio.src = songs[index].src;
title.textContent = songs[index].title;
audio.load();

audio.oncanplaythrough = () => {
if (isPlaying) {
audio
.play()
.then(() => {
playBtn.innerHTML = '<i class="fas fa-pause"></i>';
})
.catch((err) => {
console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err);
});
} else {
playBtn.innerHTML = '<i class="fas fa-play"></i>';
}
};
}

// C√°c h√†m Volume
function updateVolumeIcon() {
if (audio.muted || parseFloat(volumeControl.value) <= 0.01) {
volumeIcon.classList.remove("fa-volume-up");
volumeIcon.classList.add("fa-volume-mute", "volume-muted");
} else {
volumeIcon.classList.add("fa-volume-up");
volumeIcon.classList.remove("fa-volume-mute", "volume-muted");
}
}

// =============================================================
// III. LISTENERS & KH·ªûI ƒê·ªòNG 
// =============================================================

// üí° K√çCH HO·∫†T VISUALIZER: G·ªçi initVisualizer khi audio b·∫Øt ƒë·∫ßu play
audio.addEventListener('play', initVisualizer); 

// Listeners c·ªßa Playlist
audio.addEventListener("timeupdate", updateProgress);
audio.addEventListener("ended", nextSong);
audio.addEventListener("loadedmetadata", () => {
if (!isNaN(audio.duration)) {
duration.textContent = formatTime(audio.duration);
}
});

// Listeners c·ªßa Volume
volumeControl.addEventListener("input", () => {
const vol = parseFloat(volumeControl.value);

if (typeof audio.volume === "number") {
try { audio.volume = vol; } catch (e) { console.warn("Kh√¥ng th·ªÉ thay ƒë·ªïi volume:", e); }
}

audio.muted = vol <= 0.01;
updateVolumeIcon();
});

volumeIcon.addEventListener("click", () => {
const isMuted = audio.muted || parseFloat(volumeControl.value) <= 0.01;

if (isMuted) {
audio.muted = false;
volumeControl.value = 1;

if (typeof audio.volume === "number") { try { audio.volume = 1; } catch (e) { console.warn("Kh√¥ng th·ªÉ b·∫≠t l·∫°i volume:", e); } }
} else {
audio.muted = true;
volumeControl.value = 0;

if (typeof audio.volume === "number") { try { audio.volume = 0; } catch (e) { console.warn("Kh√¥ng th·ªÉ t·∫Øt volume:", e); } }
}
updateVolumeIcon();
});

// Kh·ªüi ƒë·ªông Playlist khi trang t·∫£i xong
loadSong(currentIndex);
updateVolumeIcon();
</script>
<script>
// CH·∫∂N CHU·ªòT PH·∫¢I V√Ä CH·ªåN VƒÇN B·∫¢N
document.addEventListener("contextmenu", (e) => e.preventDefault());
document.addEventListener("selectstart", (e) => e.preventDefault());

// CH·∫∂N K√âO CHU·ªòT
["mousedown", "mousemove", "mouseup"].forEach((evt) =>
document.addEventListener(evt, (e) => {
if (e.target.id !== "volumeControl") {
e.preventDefault();
}
})
);

// CH·∫∂N PH√çM T·∫ÆT DEVTOOLS & SAO CH√âP
document.addEventListener("keydown", (e) => {
const key = e.key.toLowerCase();
if (
(e.ctrlKey && ["u", "c", "a"].includes(key)) || // Ctrl+U, Ctrl+C, Ctrl+A
(e.ctrlKey && e.shiftKey && ["i", "j"].includes(key)) || // Ctrl+Shift+I/J
e.keyCode === 123 || // F12
e.keyCode === 122 || // F11
(e.shiftKey &&
["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown"].includes(e.key)) // Shift + ph√≠m m≈©i t√™n
) {
e.preventDefault();
alert("H√†nh ƒë·ªông n√†y kh√¥ng ƒë∆∞·ª£c ph√©p!");
}
});

// CH·∫∂N SAO CH√âP
document.addEventListener("copy", (e) => {
e.preventDefault();
alert("Kh√¥ng ƒë∆∞·ª£c sao ch√©p n·ªôi dung!");
});

// CH·ªà CH·∫∂N DEVTOOLS TR√äN PC
(function () {
// Ki·ªÉm tra n·∫øu kh√¥ng ph·∫£i thi·∫øt b·ªã di ƒë·ªông
const isMobile = /Android|iPhone|iPad|iPod|Windows Phone/i.test(
navigator.userAgent
);
if (isMobile) return; // Kh√¥ng l√†m g√¨ n·∫øu l√† mobile

let devtoolsOpen = false;
const threshold = 160;

window.addEventListener("resize", () => {
if (
window.outerWidth - window.innerWidth > threshold ||
window.outerHeight - window.innerHeight > threshold
) {
devtoolsOpen = true;
alert("Ph√°t hi·ªán DevTools ƒëang m·ªü!");
}
});

setInterval(() => {
if (devtoolsOpen) {
document.body.innerHTML = "";
alert("Trang ƒë√£ b·ªã kh√≥a v√¨ m·ªü DevTools!");
}
}, 1000);
})();
// Script k√≠ch ho·∫°t overlay
const overlay = document.getElementById("overlay");

overlay.addEventListener("click", () => {
overlay.classList.add("hidden");
isPlaying = true; // K√≠ch ho·∫°t tr·∫°ng th√°i ph√°t t·ª´ ƒë√¢y
loadSong(currentIndex); // Load l·∫°i b√†i ƒë·∫ßu ti√™n (ƒë·∫£m b·∫£o play trong loadSong s·∫Ω ƒë∆∞·ª£c g·ªçi)

audio.volume = parseFloat(volumeControl.value);
updateVolumeIcon();
});

// Ch·∫∑n scroll tr√™n mobile
window.addEventListener(
"touchmove",
function (e) {
if (e.target.id !== "volumeControl") {
e.preventDefault();
}
},
{ passive: false }
);

// Ph·∫ßn b·∫£n quy·ªÅn
(function () {
const code =
new TextDecoder().decode(
Uint8Array.from(
atob("Q3JlYXRlZCBCeSBIb8OgbmcgVsSDbiBC4bqjbyAtIEFsbCBSaWdodHMgUmVzZXJ2ZWQg"),
c => c.charCodeAt(0)
)
) +
"\u00A9 2025";

const el = document.createElement("div");
Object.assign(el.style, {
position: "fixed",
bottom: "0px",
left: "50%",
transform: "translateX(-50%)",
color: "white",
fontSize: "14px",
fontFamily: "Arial, sans-serif",
fontStyle: "italic",
whiteSpace: "nowrap",
maxWidth: "100%",
zIndex: 9998,
});

el.className = "hvb-copyright rainbow-border";
el.textContent = code;
document.body.appendChild(el);

const original = el.outerHTML;

setInterval(() => {
if (el.outerHTML !== original) {
alert("Ph·∫ßn b·∫£n quy·ªÅn ƒë√£ b·ªã thay ƒë·ªïi ho·∫∑c x√≥a!");
document.body.innerHTML = "";
throw new Error("B·∫£n quy·ªÅn b·ªã thay ƒë·ªïi.");
}
}, 100);

new MutationObserver(() => {
if (!document.body.contains(el)) {
alert("Kh√¥ng th·ªÉ x√≥a ph·∫ßn b·∫£n quy·ªÅn!");
document.body.innerHTML = "";
throw new Error("B·∫£n quy·ªÅn b·ªã x√≥a.");
}
if (el.textContent !== code) {
alert("Ph·∫ßn b·∫£n quy·ªÅn ƒë√£ b·ªã thay ƒë·ªïi!");
document.body.innerHTML = "";
throw new Error("B·∫£n quy·ªÅn b·ªã thay ƒë·ªïi.");
}
}).observe(document.body, {
childList: true,
subtree: true,
attributes: true,
});

(function protect() {
if (
!document.body.innerHTML.includes("Hoang Van Bao") &&
!document.body.innerHTML.includes("Ho√†ng VƒÉn B·∫£o")
) {
alert("M√£ JavaScript b·ªã thay ƒë·ªïi ho·∫∑c x√≥a.");
document.body.innerHTML = "";
throw new Error("M√£ b·ªã thay ƒë·ªïi.");
}
setTimeout(protect, 100);
})();
})();

// M·ªëc th·ªùi gian c·ªë ƒë·ªãnh: 2025-07-07 21:00:00
const createdDate = new Date("2025-07-07T21:00:00");

function updateTimer() {
const now = new Date();
let diff = Math.floor((now - createdDate) / 1000);

const days = Math.floor(diff / (24 * 60 * 60));
diff %= (24 * 60 * 60);
const hours = Math.floor(diff / (60 * 60));
diff %= (60 * 60);
const minutes = Math.floor(diff / 60);
const seconds = diff % 60;

document.getElementById("momk").textContent =
`${days} day ${hours} hour ${minutes} minute ${seconds} second`;
}

updateTimer();
setInterval(updateTimer, 1000);
// JS PH·∫¶N SOUND
let isDragging = false;
thumb.addEventListener("mousedown", (e) => {
isDragging = true;
document.body.style.userSelect = "none";
});

document.addEventListener("mouseup", () => {
if (isDragging) {
isDragging = false;
document.body.style.userSelect = "";
}
});

document.addEventListener("mousemove", (e) => {
if (isDragging) {
const seekbar = document.querySelector(".seekbar");
const rect = seekbar.getBoundingClientRect();
let percent = (e.clientX - rect.left) / rect.width;
percent = Math.max(0, Math.min(1, percent)); // gi·ªõi h·∫°n t·ª´ 0 -> 1
const newTime = percent * audio.duration;
audio.currentTime = newTime;

// C·∫≠p nh·∫≠t UI
progress.style.width = percent * 100 + "%";
thumb.style.left = `calc(${percent * 100}% - 7px)`;
current.textContent = formatTime(audio.currentTime);
}
});

// ¬© HO√ÄNG VƒÇN B·∫¢O ‚úÖ
(function() {
setTimeout(function() {
console.log("%c‚ö†Ô∏è STOP COPY SOURCE !", "color: red; font-size: 40px; font-weight: bold; text-shadow: 2px 2px 5px black;");
console.log("%c‚áù ¬© HO√ÄNG VƒÇN B·∫¢O ‚úÖ", "color: black; font-size: 35px; font-weight: bold;");
console.log("%c‚áù Tr·ªôm SOURCE L√† H√†nh Vi Kh√¥ng T·ªët, C·∫ßn Source Inbox Facebook ƒê·ªÉ xin, Please !!! ", "color: black; font-size: 30px;");
console.log("%c‚áù Facebook C·ªßa T√¥i: https://www.facebook.com/HVB.FAQ", "color: blue; font-size: 22px; text-decoration: underline;");
}, 1000); // Ch·∫°y sau 1 gi√¢y khi trang load
})();

</script>
<script>
// hieu ung hoa mai
const LIFE_PER_TICK = 900 / 60;
const MAX_FLAKES = Math.min(75, screen.width / 1280 * 5);
const flakes = [];
const period = [
n => 5 * (Math.sin(n)),
n => 8 * (Math.cos(n)),
n => 5 * (Math.sin(n) * Math.cos(2 * n)),
n => 2 * (Math.sin(0.25 * n) - Math.cos(0.75 * n) + 1),
n => 5 * (Math.sin(0.75 * n) + Math.cos(0.25 * n) - 1)
];
const fun = ['√¢‚Ä∫‚Äû', 'ƒë≈∏¬é¬Å', 'ƒë≈∏¬¶≈í', '√¢Àú∆í', 'ƒë≈∏¬ç¬™'];
const cssString = `.snowfall-container {
display: block;
height: 100vh;
left: 0;
margin: 0;
padding: 0;
-webkit-perspective-origin: top center;
perspective-origin: top center;
-webkit-perspective: 150px;
perspective: 150px;
pointer-events: none;
position: fixed;
top: 0;
-webkit-transform-style: preserve-3d;
transform-style: preserve-3d;
width: 100%;
z-index: 99999; }

.snowflake {
pointer-events: none;
color: #ddf;
display: block;
font-size: 24px;
left: -12px;
line-height: 24px;
position: absolute;
top: -12px;
-webkit-transform-origin: center;
transform-origin: center; }`;

function ready(fn) {
if (document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading') {
fn();
} else {
document.addEventListener('DOMContentLoaded', fn);
}
}

function resetFlake(flake) {
let x = flake.dataset.origX = (Math.random() * 100);
let y = flake.dataset.origY = 0;
let z = flake.dataset.origZ = (Math.random() < 0.1) ? (Math.ceil(Math.random() * 100) + 25) : 0;
let life = flake.dataset.life = (Math.ceil(Math.random() * 4000) + 6000);
flake.dataset.origLife = life;
flake.style.transform = `translate3d(${x}vw, ${y}vh, ${z}px)`;
flake.style.opacity = 1.0;
flake.dataset.periodFunction = Math.floor(Math.random() * period.length);

if (Math.random() < 0.001) {
flake.innerText = fun[Math.floor(Math.random() * fun.length)];
}
}

function updatePositions() {

flakes.forEach((flake) => {
let origLife = parseFloat(flake.dataset.origLife)
let curLife = parseFloat(flake.dataset.life);
let dt = (origLife - curLife) / origLife;

if (dt <= 1.0) {
let p = period[parseInt(flake.dataset.periodFunction)];
let x = p(dt * 2 * Math.PI) + parseFloat(flake.dataset.origX);
let y = 100 * dt;
let z = parseFloat(flake.dataset.origZ);
flake.style.transform = `translate3d(${x}vw, ${y}vh, ${z}px)`;
if (dt >= 0.5) {
flake.style.opacity = (1.0 - ((dt - 0.5) * 2));
}
curLife -= LIFE_PER_TICK;
flake.dataset.life = curLife;
} else {
resetFlake(flake);
}
});
window.requestAnimationFrame(updatePositions);
}

function appendSnow() {
let styles = document.createElement('style');
styles.innerText = cssString;
document.querySelector('head').appendChild(styles);
let field = document.createElement('div');
field.classList.add('snowfall-container');
field.setAttribute('aria-hidden', 'true');
field.setAttribute('role', 'presentation');
document.body.appendChild(field);
let i = 0;
const addFlake = () => {
let flake = document.createElement('span');
flake.classList.add('snowflake');
flake.setAttribute('aria-hidden', 'true');
flake.setAttribute('role', 'presentation');
flake.innerHTML =
"<img style='width:30px;height:30px;' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEtGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpQaXhlbFhEaW1lbnNpb249IjEwMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjEwMCIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICB0aWZmOkltYWdlV2lkdGg9IjEwMCIKICAgdGlmZjpJbWFnZUxlbmd0aD0iMTAwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIHhtcDpNb2RpZnlEYXRlPSIyMDIz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'/>";
resetFlake(flake);
flakes.push(flake);
field.appendChild(flake);
if (i++ <= MAX_FLAKES) {
setTimeout(addFlake, Math.ceil(Math.random() * 300) + 100);
}
};
addFlake();
updatePositions();
}
ready(appendSnow);
</script>
<script type="text/javascript" src="https://web.nvnstatic.net/js/events/newyear.js"></script>
<script>
// // Hi·ªáu ·ª©ng tr√°i tim r∆°i
// const colors = ["#ff69b4", "#ff1493", "#db7093", "#ff4500", "#ff0000", "#ff69b4"];
// const numHearts = 10; // üëà √çT h∆°n

// const hearts = [];

// for (let i = 0; i < numHearts; i++) {
// const heart = document.createElement("div");
// heart.textContent = "‚ù§Ô∏è";
// heart.style.position = "fixed";
// heart.style.fontSize = "24px";
// heart.style.pointerEvents = "none";
// heart.style.zIndex = "99999";
// heart.style.top = "-30px";
// heart.style.left = `${Math.random() * 100}%`;
// heart.style.color = colors[Math.floor(Math.random() * colors.length)];
// document.body.appendChild(heart);
// hearts.push({
// el: heart,
// x: Math.random() * window.innerWidth,
// y: -30,
// speed: 0.3 + Math.random() * 1, // üëà R∆°i nh·∫π h∆°n
// sway: Math.random() * 50, // üëà L·∫Øc nh·∫π h∆°n
// });
// }

// function animateHearts() {
// hearts.forEach((h) => {
// h.y += h.speed;
// h.x += Math.sin(h.y / 30) * 0.5;
// h.el.style.top = `${h.y}px`;
// h.el.style.left = `${h.x}px`;
// if (h.y > window.innerHeight) {
// h.y = -30;
// h.x = Math.random() * window.innerWidth;
// h.el.style.color = colors[Math.floor(Math.random() * colors.length)];
// }
// });
// requestAnimationFrame(animateHearts);
// }
// animateHearts();
</script>
<script>
(async () => {
let wakeLock = null;

// V·ªõi c√°c tr√¨nh duy·ªát h·ªó tr·ª£ Wake Lock (Chrome, Edge, Samsung Internet...)
async function requestWakeLock() {
try {
wakeLock = await navigator.wakeLock.request('screen');
console.log('‚úÖ Wake Lock ƒë√£ b·∫≠t');
wakeLock.addEventListener('release', () => {
console.warn('üîÅ Wake Lock b·ªã m·∫•t, ƒëang y√™u c·∫ßu l·∫°i...');
requestWakeLock();
});
} catch (err) {
console.error('Wake Lock error:', err);
}
}

if ('wakeLock' in navigator) {
requestWakeLock();
document.addEventListener('visibilitychange', () => {
if (wakeLock !== null && document.visibilityState === 'visible') {
requestWakeLock();
}
});
} else {
// N·∫øu tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ (Safari/iOS...), d√πng m·∫πo ph√°t video im l·∫∑ng
const video = document.createElement('video');
video.setAttribute('playsinline', '');
video.setAttribute('muted', '');
video.setAttribute('loop', '');
video.style.display = 'none';

const blob = new Blob([new Uint8Array([0x00])], { type: 'video/mp4' });
const videoUrl = URL.createObjectURL(blob);
video.src = videoUrl;

document.body.appendChild(video);

const tryPlay = () => {
video.play().catch(err => {
console.warn('iOS video autoplay block:', err);
});
};

// Ph√°t l·∫°i khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c
document.addEventListener('click', tryPlay, { once: true });
document.addEventListener('touchstart', tryPlay, { once: true });

// Th·ª≠ ph√°t ngay n·∫øu ƒë∆∞·ª£c
tryPlay();
}
})();
</script>
<!-- Background Sakura -->
<canvas id="sakura"></canvas>
<div class="btnbg">
</div>

<!-- sakura shader -->
<script id="sakura_point_vsh" type="x-shader/x_vertex">
uniform mat4 uProjection;
uniform mat4 uModelview;
uniform vec3 uResolution;
uniform vec3 uOffset;
uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

attribute vec3 aPosition;
attribute vec3 aEuler;
attribute vec2 aMisc; //x:size, y:fade

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

void main(void) {
// Projection is based on vertical angle
vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);
gl_Position = uProjection * pos;
gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;

pposition = pos.xyz;
psize = aMisc.x;
pdist = length(pos.xyz);
palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);

vec3 elrsn = sin(aEuler);
vec3 elrcs = cos(aEuler);
mat3 rotx = mat3(
1.0, 0.0, 0.0,
0.0, elrcs.x, elrsn.x,
0.0, -elrsn.x, elrcs.x
);
mat3 roty = mat3(
elrcs.y, 0.0, -elrsn.y,
0.0, 1.0, 0.0,
elrsn.y, 0.0, elrcs.y
);
mat3 rotz = mat3(
elrcs.z, elrsn.z, 0.0, 
-elrsn.z, elrcs.z, 0.0,
0.0, 0.0, 1.0
);
mat3 rotmat = rotx * roty * rotz;
normal = rotmat[2];

mat3 trrotm = mat3(
rotmat[0][0], rotmat[1][0], rotmat[2][0],
rotmat[0][1], rotmat[1][1], rotmat[2][1],
rotmat[0][2], rotmat[1][2], rotmat[2][2]
);
normX = trrotm[0];
normY = trrotm[1];
normZ = trrotm[2];

const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);

float tmpdfs = dot(lit, normal);
if(tmpdfs < 0.0) {
normal = -normal;
tmpdfs = dot(lit, normal);
}
diffuse = 0.4 + tmpdfs;

vec3 eyev = normalize(-pos.xyz);
if(dot(eyev, normal) > 0.0) {
vec3 hv = normalize(eyev + lit);
specular = pow(max(dot(hv, normal), 0.0), 20.0);
}
else {
specular = 0.0;
}

rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);
rstop = pow(rstop, 0.5);
//-0.69315 = ln(0.5)
distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));
}
</script>
<script id="sakura_point_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

const vec3 fadeCol = vec3(0.08, 0.03, 0.06);

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

float ellipse(vec2 p, vec2 o, vec2 r) {
vec2 lp = (p - o) / r;
return length(lp) - 1.0;
}

void main(void) {
vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;
vec3 d = vec3(0.0, 0.0, -1.0);
float nd = normZ.z; //dot(-normZ, d);
if(abs(nd) < 0.0001) discard;

float np = dot(normZ, p);
vec3 tp = p + d * np / nd;
vec2 coord = vec2(dot(normX, tp), dot(normY, tp));

//angle = 15 degree
const float flwrsn = 0.258819045102521;
const float flwrcs = 0.965925826289068;
mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);
vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;

float r;
if(flwrp.x < 0.0) {
r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);
}
else {
r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);
}

if(r > rstop) discard;

vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);
float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));
col *= vec3(1.0, grady, grady);
col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));
col = col * diffuse + specular;

col = mix(fadeCol, col, distancefade);

float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;
alpha = smoothstep(0.0, 1.0, alpha) * palpha;

gl_FragColor = vec4(col * 0.5, alpha);
}
</script>
<!-- effects -->
<script id="fx_common_vsh" type="x-shader/x_vertex">
uniform vec3 uResolution;
attribute vec2 aPosition;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
gl_Position = vec4(aPosition, 0.0, 1.0);
texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script>
<script id="bg_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec2 uTimes;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
vec3 col;
float c;
vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);
c = exp(-pow(length(tmpv) * 1.8, 2.0));
col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);
gl_FragColor = vec4(col * 0.5, 1.0);
}
</script>
<script id="fx_brightbuf_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
vec4 col = texture2D(uSrc, texCoord);
gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);
}
</script>
<script id="fx_dirblur_r4_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;
uniform vec4 uBlurDir; //dir(x, y), stride(z, w)

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
vec4 col = texture2D(uSrc, texCoord);
col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);
col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);
col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);
col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);
gl_FragColor = col / 5.0;
}
</script>
<!-- effect fragment shader template -->
<script id="fx_common_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
gl_FragColor = texture2D(uSrc, texCoord);
}
</script>
<!-- post processing -->
<script id="pp_final_vsh" type="x-shader/x_vertex">
uniform vec3 uResolution;
attribute vec2 aPosition;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
gl_Position = vec4(aPosition, 0.0, 1.0);
texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script>
<script id="pp_final_fsh" type="x-shader/x_fragment">
#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform sampler2D uBloom;
uniform vec2 uDelta;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
vec4 srccol = texture2D(uSrc, texCoord) * 2.0;
vec4 bloomcol = texture2D(uBloom, texCoord);
vec4 col;
col = srccol + bloomcol * (vec4(1.0) + srccol);
col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);
col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)

gl_FragColor = vec4(col.rgb, 1.0);
gl_FragColor.a = 1.0;
}
</script>
<div id='snowflakeContainer'>
<p class='snowflake'>‚ùÑ</p>
</div>
<script type="text/javascript">
//<![CDATA[
var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var transforms=["transform","msTransform","webkitTransform","mozTransform","oTransform"];var transformProperty=getSupportedPropertyName(transforms);var snowflakes=[];var browserWidth;var browserHeight;var numberOfSnowflakes=50;var resetPosition=false;function setup(){window.addEventListener("DOMContentLoaded",generateSnowflakes,false);window.addEventListener("resize",setResetFlag,false)}setup();function getSupportedPropertyName(b){for(var a=0;a<b.length;a++){if(typeof document.body.style[b[a]]!="undefined"){return b[a]}}return null}function Snowflake(b,a,d,e,c){this.element=b;this.radius=a;this.speed=d;this.xPos=e;this.yPos=c;this.counter=0;this.sign=Math.random()<0.5?1:-1;this.element.style.opacity=0.5+Math.random();this.element.style.fontSize=4+Math.random()*30+"px"}Snowflake.prototype.update=function(){this.counter+=this.speed/5000;this.xPos+=this.sign*this.speed*Math.cos(this.counter)/40;this.yPos+=Math.sin(this.counter)/40+this.speed/30;setTranslate3DTransform(this.element,Math.round(this.xPos),Math.round(this.yPos));if(this.yPos>browserHeight){this.yPos=-50}};function setTranslate3DTransform(a,c,b){var d="translate3d("+c+"px, "+b+"px, 0)";a.style[transformProperty]=d}function generateSnowflakes(){var b=document.querySelector(".snowflake");var h=b.parentNode;browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;for(var d=0;d<numberOfSnowflakes;d++){var j=b.cloneNode(true);h.appendChild(j);var e=getPosition(50,browserWidth);var a=getPosition(50,browserHeight);var c=5+Math.random()*40;var g=4+Math.random()*10;var f=new Snowflake(j,g,c,e,a);snowflakes.push(f)}h.removeChild(b);moveSnowflakes()}function moveSnowflakes(){for(var b=0;b<snowflakes.length;b++){var a=snowflakes[b];a.update()}if(resetPosition){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;for(var b=0;b<snowflakes.length;b++){var a=snowflakes[b];a.xPos=getPosition(50,browserWidth);a.yPos=getPosition(50,browserHeight)}resetPosition=false}requestAnimationFrame(moveSnowflakes)}function getPosition(b,a){return Math.round(-1*b+Math.random()*(a+2*b))}function setResetFlag(a){resetPosition=true};
//]]>

// Ph·∫ßn L√° C·ªù VN Tung Bay
document.addEventListener('DOMContentLoaded', () => {
// --- KH·ªûI T·∫†O CANVAS V√Ä M√ÄU S·∫ÆC ---
const canvas = document.getElementById('vietnamFlagCanvas');
const ctx = canvas.getContext('2d');
const W = canvas.width; // 240px
const H = canvas.height; // 160px

const RED = 'rgb(218, 37, 29)';
const YELLOW = 'rgb(255, 210, 0)';

// --- C√ÅC THAM S·ªê G·ª¢N S√ìNG (ƒêI·ªÄU CH·ªàNH T·∫†I ƒê√ÇY) ---
let tick = 0;
const waveAmplitude = 6; // Bi√™n ƒë·ªô s√≥ng (Chi·ªÅu cao s√≥ng - Gi√≥ m·∫°nh: 20, Gi√≥ nh·∫π: 5)
const waveLength = 30;    // ƒê·ªô d√†i s√≥ng (Kho·∫£ng c√°ch gi·ªØa c√°c ƒë·ªânh s√≥ng - S√≥ng ng·∫Øn: 15, S√≥ng d√†i: 40)
const waveSpeed = 0.2;    // T·ªëc ƒë·ªô di chuy·ªÉn c·ªßa s√≥ng (T·ªëc ƒë·ªô tung bay)

// --- H√ÄM V·∫º NG√îI SAO ---
function drawStar(ctx, cx, cy, R, color) {
ctx.fillStyle = color;
ctx.beginPath();
let n = 5;
let r_inner = R * 0.382; // T·ª∑ l·ªá ng√¥i sao 5 c√°nh chu·∫©n
for (let i = 0; i < n * 2; i++) {
let r = i % 2 === 0 ? R : r_inner;
let angle = (Math.PI / n) * i - Math.PI / 2;
let x = cx + r * Math.cos(angle);
let y = cy + r * Math.sin(angle);
if (i === 0) ctx.moveTo(x, y);
else ctx.lineTo(x, y);
}
ctx.closePath();
ctx.fill();
}

// --- V√íNG L·∫∂P CH√çNH (V·∫º C·ªú G·ª¢N S√ìNG V√Ä CH·ªÆ) ---
function drawWavingFlag() {
ctx.clearRect(0, 0, W, H);

// T·∫°o c·ªù ph·∫≥ng (buffer) ƒë·ªÉ l·∫•y pixel t·ª´ng c·ªôt
let flatFlag = document.createElement('canvas');
flatFlag.width = W; flatFlag.height = H;
let flatCtx = flatFlag.getContext('2d');

// V·∫Ω n·ªÅn ƒë·ªè ph·∫≥ng
flatCtx.fillStyle = RED;
flatCtx.fillRect(0, 0, W, H);

// V·∫Ω ng√¥i sao v√†ng ph·∫≥ng
drawStar(flatCtx, W / 2, H / 2, 35, YELLOW); 

// --- V·∫º CH·ªÆ "T√¥i Y√™u Vi·ªát Nam" (ƒê√É ƒêI·ªÄU CH·ªàNH K√çCH TH∆Ø·ªöC V√Ä V·ªä TR√ç) ---
flatCtx.font = 'bold 20px Arial'; // GI·∫¢M C·ª† CH·ªÆ t·ª´ 24px xu·ªëng 18px
flatCtx.fillStyle = 'white';     
flatCtx.textAlign = 'center';    
flatCtx.textBaseline = 'middle'; 

// V·ªã tr√≠ ch·ªØ: D·ªãch l√™n tr√™n m·ªôt ch√∫t so v·ªõi ng√¥i sao
// H/2 + 30 -> H/2 + 20 (d·ªãch l√™n 10px so v·ªõi tr∆∞·ªõc)
flatCtx.fillText('T√¥i Y√™u Vi·ªát Nam', W / 2, H / 2 + 50); 
// ------------------------------------

// T√°i t·∫°o hi·ªáu ·ª©ng s√≥ng b·∫±ng c√°ch d·ªãch chuy·ªÉn t·ª´ng c·ªôt pixel
for (let x = 0; x < W; x++) {
let offset = waveAmplitude * Math.sin(x / waveLength + tick);
let column = flatCtx.getImageData(x, 0, 1, H);
ctx.putImageData(column, x, offset);
}

tick += waveSpeed; 
requestAnimationFrame(drawWavingFlag);
}
drawWavingFlag();

// --- SPARKLE BACKGROUND ANIMATION (Gi·ªØ nguy√™n) ---
const particleOverlay = document.getElementById('particle-overlay');
const numberOfSparkles = 70;

function createSparkle() {
const sparkle = document.createElement('div');
sparkle.classList.add('sparkle');

const size = Math.random() * 2 + 1.5; 
sparkle.style.width = `${size}px`;
sparkle.style.height = `${size}px`;
sparkle.style.left = `${Math.random() * 100}vw`;

const duration = Math.random() * 8 + 4; 
const delay = Math.random() * 5; 
sparkle.style.animationDuration = `${duration}s`;
sparkle.style.animationDelay = `${delay}s`;

particleOverlay.appendChild(sparkle);
}
for (let i = 0; i < numberOfSparkles; i++) {
createSparkle();
}
});
</script>
</body>
</html>
                                                 <!-- Design By Ho√†ng VƒÉn B·∫£o -->
